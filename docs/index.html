<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Importing and Manipulating Symmetric Input-Output Tables • iotables</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Importing and Manipulating Symmetric Input-Output Tables">
<meta property="og:description" content="Pre-processing tasks related to working with Eurostat's symmetric input-output
    tables and provide basic input-output economics calculations. The package is 
    a part of rOpenGov &lt;http://ropengov.github.io/&gt; to open source open government initiatives.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">iotables</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/germany_1990.html">Germany 1990</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rOpenGov/iotables">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="iotables" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#iotables" class="anchor"></a>iotables</h1></div>
<p>The symmetric input-output tables (SIOTs) are complex statistical products that present inter-related statistics in a predefined structure. They are often found in spreadsheets that follow this structure, or in the case Eurostat in a data repository. In both cases they in reproducible research must be downloaded and restructured to programmatically accessible form. Often these highly structured statistics need to be analyzed together with other data, for example, when employment effects and multipliers are calculated. In this case processing the employment data to SIOT conforming format is a significant preprocessing challenge.</p>
<p>The iotables are exactly designed for these tasks. Currently the package downloads and processes standardized European SIOTs conforming to the latest statistical regulations, i.e. SIOTs starting from the year 2010.</p>
<p>The aim of this introduction is not to introduce input-output economics, or SIOTs in detail. The Eurostat manual on input-output tables and the <a href="http://ec.europa.eu/eurostat/web/esa-supply-use-input-tables/methodology/symmetric-input-output-tables">Eurostat tematic page</a> [‘Eurostat Manual’ in the documentation] should be consulted for further information about the data and the metadata.</p>
<p>In order to test the analytical functions of the package and to have a manageable sized example data set, we use the real-life data from the Eurostat manual. The <code>germany_1990</code> dataset is a simplified 6x6 sized SIOT taken from the Eurostat SIOT manual (page 481). The package function examples can be checked against <a href="http://ec.europa.eu/eurostat/documents/3859598/5902113/KS-RA-07-013-EN.PDF/b0b3d71e-3930-4442-94be-70b36cea9b39?version=1.0">Jörg Beutel’s published results</a>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install iotools from CRAN or the latest development version with github:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"iotables"</span>)
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"rOpenGov/iotables"</span>)

<span class="co">#with vignettes:</span>
<span class="co">#devtools::install_github("rOpenGov/iotables", build_vignettes = TRUE)</span></code></pre></div>
<p>YOu can follow changes on the NEWS.md file.</p>
</div>
<div id="acquiring-data" class="section level2">
<h2 class="hasAnchor">
<a href="#acquiring-data" class="anchor"></a>Acquiring data</h2>
<p>Eurostat’s data can be downloaded in several tidy, long-form, files, and a lot of filtering is needeed to start working with it. In case you need to work with a SIOT given in Excel, for example, Eurostat’s pre-2010 files, which cannot be downloaded with the eurostat package, please consult the Croatia vignette. What you want to do is to arrive to a similar format to Eurostat’s long-form.</p>
<p>Currently the following Eurostat SIOTs can be used:</p>
<ul>
<li><p>product x product SIOTs <code>naio_10_cp1700</code> or <code>naio_10_pyp1700</code>;</p></li>
<li><p>industry x industry SIOTS <code>naio_10_cp1750</code> or<code>naio_10_pyp1750</code>;</p></li>
<li><p>trade and transport margins <code>naio_10_cp1620</code> or <code>naio_10_pyp1620</code>, only with <code>stk_flow = 'TOTAL'</code></p></li>
<li><p>net taxes less subsidies <code>naio_10_cp1630</code> or <code>naio_10_pyp1630</code>, only with <code>stk_flow = 'TOTAL'</code>.</p></li>
</ul>
<p>The <code>cp</code> element refers to basic prices and the <code>pyp</code> to previous years’ prices.</p>
<p>The following example is not run.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span> (iotables)

<span class="co">#Get the Slovak national IO table.</span>
sk_io &lt;-<span class="st"> </span><span class="kw"><a href="reference/iotable_get.html">iotable_get</a></span> ( <span class="dt">source =</span> <span class="st">"naio_10_cp1700"</span>, <span class="dt">geo =</span> <span class="st">"SK"</span>,
                       <span class="dt">year =</span> <span class="dv">2010</span>, <span class="dt">unit =</span> <span class="st">"MIO_EUR"</span>, 
                       <span class="dt">labelling =</span> <span class="st">"iotables"</span>)

<span class="co">#labelling = 'short' will keep the Eurostat short labels.</span></code></pre></div>
<p>The Eurostat bulk downloader will give you a very long file: all country data in a long-form, with different currencies, and for different years. The <code>iotable_get</code> function will filter out a table for you.</p>
<ul>
<li><p>Eurostat uses different labelling for product x product, product x industry and industry x industry cases. You can preserve the Eurostat metadata vocabulary with choosing the <code>labelling  = 'short'</code> option in the preprocessing functions.</p></li>
<li><p>The default <code>labelling  = 'iotables'</code> parameter will change all row and column names to a standard snake_var_name format naming. This results in more readable output, but of course you have to keep in mind the differences among the tables.</p></li>
<li><p>The <code>unit</code> parameter is necessary because Eurostat files contain the same data in national currency units and euros. For eurozone member states <code>unit = MIO_EUR</code> and <code>unit = MIO_NAC</code> is equivalent, because the euro is their national currency.</p></li>
<li><p>The <code>year</code> should be given as a numeric.</p></li>
<li><p>The <code>geo</code> can be inputed with 2 letter country codes or country names. Beware, that Eurostat UK for the United Kingdom instead of GB and EL for Greece instead of GR.</p></li>
<li><p>The <code>stk_flow</code> variable is only used when there are separate tables for domestic product and imports. In this case you can choose <code>DOM</code>, <code>IMP</code> or <code>TOTAL</code>. When not applicable, rely on the default setting.</p></li>
</ul>
</div>
<div id="preprocessing" class="section level2">
<h2 class="hasAnchor">
<a href="#preprocessing" class="anchor"></a>Preprocessing</h2>
<p>The <code><a href="reference/use_table_get.html">use_table_get ()</a></code> function extracts only the input-flow matrix from the table. The <code><a href="reference/output_get.html">output_get ()</a></code> function extracts the output vector. Because the Eurostat input-output files are very large, we use the simplified German IO table for the examples. This is also useful for testing the functions as the returned values can be checked against Eurostat manual values.</p>
<p>For some analysis we use the household consumption, for some analysis we do not need it. In all cases, the <code>households = TRUE</code> parameter will add the household consumption expenditure column, and in the case of the use table the wages (or compensation) row to maintain the symmetry of the table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">de_use &lt;-<span class="st"> </span><span class="kw"><a href="reference/use_table_get.html">use_table_get</a></span> ( <span class="dt">source =</span> <span class="st">"germany_1990"</span>, <span class="dt">geo =</span> <span class="st">"DE"</span>,
                       <span class="dt">year =</span> <span class="dv">1990</span>, <span class="dt">unit =</span> <span class="st">"MIO_EUR"</span>, 
                       <span class="dt">households =</span> <span class="ot">FALSE</span>, <span class="dt">labelling =</span> <span class="st">"iotables"</span>)

de_output &lt;-<span class="st"> </span><span class="kw"><a href="reference/output_get.html">output_get</a></span> ( <span class="dt">source =</span> <span class="st">"germany_1990"</span>, <span class="dt">geo =</span> <span class="st">"DE"</span>,
                       <span class="dt">year =</span> <span class="dv">1990</span>, <span class="dt">unit =</span> <span class="st">"MIO_EUR"</span>,
                       <span class="dt">households =</span> <span class="ot">TRUE</span>, <span class="dt">labelling =</span> <span class="st">"iotables"</span>)
<span class="kw">print</span> (de_output[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">7</span>,<span class="dv">8</span>)])
<span class="co">#&gt;    iotables_row other_services_group consumption_expenditure_household</span>
<span class="co">#&gt; 16    output_bp               508918                           1001060</span></code></pre></div>
<p>For almost all analytical uses you will need input coefficients and the Leontieff-inverse matrix. The <code><a href="reference/input_coefficient_matrix_create.html">input_coefficient_matrix_create()</a></code> function creates the input_coefficients, the <code><a href="reference/leontieff_matrix_create.html">leontieff_matrix_create()</a></code> function creates the Leontieff-matrix from the appropriate SIOT fields. The <code><a href="reference/leontieff_inverse_create.html">leontieff_inverse_create(L)</a></code> creates the inverse of the Leontieff-matrix which is used in all basic equations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">de_output &lt;-<span class="st"> </span><span class="kw"><a href="reference/output_get.html">output_get</a></span> ( <span class="dt">source =</span> <span class="st">"germany_1990"</span>, <span class="dt">geo =</span> <span class="st">"DE"</span>,
                       <span class="dt">year =</span> <span class="dv">1990</span>, <span class="dt">unit =</span> <span class="st">"MIO_EUR"</span>,
                       <span class="dt">households =</span> <span class="ot">FALSE</span>, <span class="dt">labelling =</span> <span class="st">"iotables"</span>)

de_coeff &lt;-<span class="st"> </span><span class="kw"><a href="reference/input_coefficient_matrix_create.html">input_coefficient_matrix_create</a></span>( de_use, de_output, <span class="dt">digits =</span> <span class="dv">4</span>)
L_de &lt;-<span class="st"> </span><span class="kw"><a href="reference/leontieff_matrix_create.html">leontieff_matrix_create</a></span>( <span class="dt">technology_coefficients_matrix =</span>
                                de_coeff )
I_de &lt;-<span class="st"> </span><span class="kw"><a href="reference/leontieff_inverse_create.html">leontieff_inverse_create</a></span>(L_de)
<span class="kw">print</span> (L_de[,<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])
<span class="co">#&gt;              iotables_row agriculture_group manufacturing_group</span>
<span class="co">#&gt; 1       agriculture_group            0.9742             -0.0236</span>
<span class="co">#&gt; 2     manufacturing_group           -0.1806              0.7178</span>
<span class="co">#&gt; 3      construction_group           -0.0097             -0.0068</span>
<span class="co">#&gt; 4             trade_group           -0.0811             -0.0674</span>
<span class="co">#&gt; 5 business_services_group           -0.0828             -0.0890</span>
<span class="co">#&gt; 6    other_services_group           -0.0353             -0.0139</span></code></pre></div>
<blockquote>
<p>The Leontieff matrix shown here can be checked against the Eurostat manuals table 15.9 on page 487. (The ordering of the industries is different.) The Leontieff-inverse matrix can be checked against the Eurostat input-output manual Table 15.11 on page 490. (The ordering of the industries is different.)</p>
</blockquote>
</div>
<div id="analytical-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#analytical-functions" class="anchor"></a>Analytical functions</h2>
<p>The most frequently used input-output equations are programmed into convenient R functions. If all elements are in place, working with the elements is easy with R’s matrix algebraic operators such as <code>%*%</code>.</p>
<p>Because of the high complexity of the data, any violation of matrix algebraic rules causes either an error, or worse, a hard-to-detect calculation error. The iotables functions have some built-in error handling and try to give more meaningful error and warning messages than the matrix operators. Typical errors are typos in the many column names and key colum elements, or a change in the ordering of the columns (for example to alphabetic ordering from NACE ordering), or singularity if there are empty columns.</p>
<p>Using the analytical functions we can calculate the employment multipliers for the German economy in the year 1990. For example, the <code><a href="reference/multiplier_create.html">multiplier_create()</a></code> function performs an <code>%*%</code> operation after checking if the name ordering of the input vector and Leontieff-inverse is correct, and returns the results with a key column for consistency with other function returns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">de_emp &lt;-<span class="st"> </span><span class="kw"><a href="reference/primary_input_get.html">primary_input_get</a></span> ( <span class="dt">input =</span> <span class="st">"employment_total"</span>,
                              <span class="dt">source =</span> <span class="st">"germany_1990"</span>, <span class="dt">geo =</span> <span class="st">"DE"</span>,
                              <span class="dt">year =</span> <span class="dv">1990</span>,  
                              <span class="dt">households =</span> <span class="ot">FALSE</span>, <span class="dt">labelling =</span> <span class="st">"iotables"</span>)

de_emp_indicator &lt;-<span class="st"> </span><span class="kw"><a href="reference/input_indicator_create.html">input_indicator_create</a></span> (de_emp, de_output)

employment_multipliers &lt;-<span class="st"> </span><span class="kw"><a href="reference/multiplier_create.html">multiplier_create</a></span> ( 
  <span class="dt">input_vector    =</span> de_emp_indicator,
  <span class="dt">Im              =</span> I_de,
  <span class="dt">multiplier_name =</span> <span class="st">"employment_multiplier"</span>, 
  <span class="dt">digits =</span> <span class="dv">4</span> )

<span class="kw">print</span> (employment_multipliers[<span class="dv">1</span>,<span class="dv">3</span>])
<span class="co">#&gt; [1] 0.0162</span></code></pre></div>
</div>
<div id="using-non-eurostat-input-output-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#using-non-eurostat-input-output-tables" class="anchor"></a>Using non-Eurostat input-output tables</h2>
<p>Another vignette gives some more ideas on how to add data to your analytical equations from other sources.</p>
<p>There is currently no downloader function for the <a href="https://stats.oecd.org/Index.aspx?DataSetCode=STAN_IO_TOT_DOM_IMP">OECD STAN</a> SIOT databases, which contain the SIOT’s of some OECD countries, often overlapping with the EU countries who create their SIOTs, but this is planned in the near future. The code below gets the 2011 Australian SIOT in USD terms in long-form. The <code>RJSDMX</code> package requires <code>rJava</code>, whicn in turn on Windows machines requires the 64-bit version of Java to be installed on your computer.</p>
<p>The next pre-processing steps that are already available for Eurostat will be included in the 0.3 version of the package. With some data-wrangling you can bring OECD tables to the same format as the Eurostat tables.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=iotables">https://​cloud.r-project.org/​package=iotables</a>
</li>
<li>Browse source code at <br><a href="https://github.com/rOpenGov/iotables">https://​github.com/​rOpenGov/​iotables</a>
</li>
<li>Report a bug at <br><a href="https://github.com/rOpenGov/iotables/issues">https://​github.com/​rOpenGov/​iotables/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Daniel Antal <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Daniel Antal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
